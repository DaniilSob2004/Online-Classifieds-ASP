@inject IViewLocalizer Localizer
@model OnlineClassifieds.Helpers.Pager

<div class="container">
    @if (Model.TotalItems > Model.PageSize)
    {
        <ul class="pagination justify-content-end">
            @if (Model.CurrentPage > 1)
            {
                <li class="page-item">
                    <a class="page-link" data-numPage="1">@Localizer["First_Text"]</a>
                </li>
                <li class="page-item">
                    <a class="page-link" data-numPage=@(Model.CurrentPage - 1)>@Localizer["Back_Text"]</a>
                </li>
            }

            @for (var pge = Model.StartPage; pge <= Model.EndPage; pge++)
            {
                <li class="page-item @(pge == Model.CurrentPage ? "active" : "")">
                    <a class="page-link" data-numPage=@pge>@pge</a>
                </li>
            }

            @if (Model.CurrentPage < Model.TotalPages)
            {
                <li class="page-item">
                    <a class="page-link" data-numPage=@(Model.CurrentPage + 1)>@Localizer["Forward_Text"]</a>
                </li>
                <li class="page-item">
                    <a class="page-link" data-numPage=@(Model.TotalPages)>@Localizer["Last_Text"]</a>
                </li>
            }
        </ul>
    }
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    // при клике на номер страницы, отправляется AJAX-запрос, и возвращается PartialView
    $(document).ready(function() {
        $(".page-item .page-link").click(function() {
            const numPage = $(this).attr("data-numPage");

            if (numPage && numPage !== undefined) {
                $.ajax({
                    url: "/Announcement/SwitchPage",
                    type: "POST",
                    data: { numPage: numPage },
                    success: (data) => {
                        $("#trending").html(data);  // #trending находится в файле 'Announcement/Index'
                    },
                    error: (error) => {
                        console.error(error);
                    }
                });
            }
        });
    });
</script>
